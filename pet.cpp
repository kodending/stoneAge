#include "stdafx.h"
#include "pet.h"
#include "petStand.h"

void pet::InputHandle()
{
	petState* newType = _petState->inputHandle(this);
	if (newType != nullptr)
	{
		SAFE_DELETE(_petState);
		_petState = newType;
		_petState->enter(this);
	}
}

HRESULT pet::init()
{
	return S_OK;
}

HRESULT pet::init(POINT position, DIRECTION petDirection, PETSTATE petState, PETNAME petName, bool isPlayerPet)
{
	_currentFrameX = 0;
	_elapsedTime = 0;
	_elapsedSec = 0.15f;
	_petName = petName;
	_imageMoveX = 0;
	_imageMoveY = 0;
	_petDirection = petDirection;
	_currentFrameY = (int)petDirection;
	_isPlayerPet = isPlayerPet;
	_enumPetState = petState;
	_isMove = false;
	_prePositionX = 0;
	_prePositionY = 0;
	_prePositionSave = false;

	//펫종류마다 설정하기
	setPetName();
	setPlayerPetName();
	_imageName = IMAGEMANAGER->findImage(_renderName);

	_tileCenterX = position.x;
	_tileCenterY = position.y;
	_imageCenterX = 0;
	_imageCenterY = 0;

	_moveEndX = 0;
	_moveEndY = 0;

	_imageRect = RectMakeCenter(_tileCenterX, _tileCenterY, _imageName->getFrameWidth(), _imageName->getFrameHeight());

	_selectRect = RectMakeCenter(_tileCenterX, _tileCenterY, _imageName->getFrameWidth() / 2, _imageName->getFrameHeight() / 2);

	_tileRect = RectMakeCenter(_tileCenterX, _tileCenterY, 64, 47);

	RENDERMANAGER->addObj("pet", _renderName.c_str(), &_tileCenterX, &_tileCenterY, &_imageCenterX, &_imageCenterY, &_currentFrameX, &_currentFrameY);

	_isBattleMode = false;
	_isRideMode = false;
	_elapsedSec = 0.11f;
	_isAttackTime = false;
	_isAttacked = false;
	_isAttackClose = false;
	_isHurt = false;
	_isDefenseOn = false;
	_damageCount = 0;
	_isDamaged = false;
	_damageTimeCount = 0;
	_isCatched = false;
	_isDead = false;
	_isDeadTime = false;

	_petState = new petStand();
	_petState->enter(this);

	return S_OK;
}

void pet::release()
{
	_petState->exit(this);
}

void pet::update()
{
	InputHandle();
	_petState->update(this);

	_elapsedTime += TIMEMANAGER->getElapsedTime();

	if (_elapsedTime >= _elapsedSec)
	{
		_elapsedTime -= _elapsedSec;

		if (_enumPetState != PET_CATCHED) 	_currentFrameX++;

		if (_enumPetState == PET_RUN || _enumPetState == PET_STAND)
		{
			if (_currentFrameX > _imageName->getMaxFrameX())
			{
				_currentFrameX = 0;
			}
		}

		if (_enumPetState == PET_ATTACK || _enumPetState == PET_DEAD ||
			_enumPetState == PET_DEFENSE || _enumPetState == PET_HURT)
		{
			if (_currentFrameX > _imageName->getMaxFrameX())
			{
				_currentFrameX = _imageName->getMaxFrameX();
			}
		}
	}

	if (_isDamaged == true)
	{
		_damageTimeCount++;

		if (_damageTimeCount >= 40)
		{
			_damageTimeCount = 0;
			_isDamaged = false;
		}
	}

	_tileRect = RectMakeCenter(_tileCenterX, _tileCenterY, 64, 47);
	_imageRect = RectMakeCenter(_tileCenterX + _imageMoveX, _tileCenterY + _imageMoveY,
		_imageName->getFrameWidth(), _imageName->getFrameHeight());
	_imageCenterX = _tileCenterX + _imageMoveX;
	_imageCenterY = _tileCenterY + _imageMoveY;
	_selectRect = RectMakeCenter(_tileCenterX + _imageMoveX, _tileCenterY + _imageMoveY,
		_imageName->getFrameWidth() / 2, _imageName->getFrameHeight() / 2);
}

void pet::render()
{
	if (KEYMANAGER->isToggleKey(VK_TAB))
	{
		Rectangle(getMemDC(), _imageRect);
		Rectangle(getMemDC(), _selectRect);
		Rectangle(getMemDC(), _tileRect);
	}

	if (_isDefenseOn == true && _isDead == false)
	{
		IMAGEMANAGER->render("guard", getMemDC(), _selectRect.left, _selectRect.top - 20);
	}

	if (_isDamaged == true)
	{
		HFONT font = CreateFont(25, 0, 0, 0, 500, false, false, false, DEFAULT_CHARSET,
			0, 0, 0, 0, TEXT("맑은고딕"));
		HFONT oldFont = (HFONT)SelectObject(getMemDC(), font);
		SetBkMode(getMemDC(), TRANSPARENT);
		SetTextColor(getMemDC(), RGB(255, 20, 20));

		char damage[256];
		TextOut(getMemDC(), _selectRect.left + 25, _selectRect.top - 40 - _damageTimeCount,
			_itoa(_damageCount, damage, 10), strlen(_itoa(_damageCount, damage, 10)));

		SelectObject(getMemDC(), oldFont);
		DeleteObject(font);
		SetBkMode(getMemDC(), OPAQUE);
	}
}

void pet::deletePet()
{
	RENDERMANAGER->deleteObj("pet", &_tileCenterX, &_tileCenterY);
}

void pet::setPetName()
{
	if (_isPlayerPet == true) return;

	_petLevel = 1;
	for (int i = 0; i < 6; ++i)
	{
		if (i == 0) _petSkillNum[0] = (int)PET_SKILL_ATTACK;
		if (i == 1) _petSkillNum[1] = (int)PET_SKILL_DEFENSE;
		if (i > 1)  _petSkillNum[i] = (int)PET_SKILL_NONE;
	}


	if (_petName == DURI)
	{
		_renderName = "duri_stand";
		_petNameString = "두리";
		_attributeLandCount = 0;
		_attributeWaterCount = 4;
		_attributeFireCount = 6;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(3, 8);
		_petDefensePower = RND->getFromIntTo(2, 6);
		_petSpeedPower = RND->getFromIntTo(3, 7);
		_petTotalStamina = RND->getFromIntTo(28, 38);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 5;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -10.5f;
		}
	}

	if (_petName == SPOTTEDURI)
	{
		_renderName = "spottedUri_stand";
		_petNameString = "얼룩우리";
		_attributeLandCount = 10;
		_attributeWaterCount = 0;
		_attributeFireCount = 0;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(2, 6);
		_petDefensePower = RND->getFromIntTo(2, 6);
		_petSpeedPower = RND->getFromIntTo(1, 5);
		_petTotalStamina = RND->getFromIntTo(19, 29);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 5;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -10.5f;
		}
	}

	if (_petName == URI)
	{
		_renderName = "uri_stand";
		_petNameString = "우리";
		_attributeLandCount = 8;
		_attributeWaterCount = 2;
		_attributeFireCount = 0;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(1, 3);
		_petDefensePower = RND->getFromIntTo(1, 3);
		_petSpeedPower = RND->getFromIntTo(1, 3);
		_petTotalStamina = RND->getFromIntTo(14, 20);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 5;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -10.5f;
		}
	}

	if (_petName == MAMONAS)
	{
		_renderName = "mamonas_stand";
		_petNameString = "마모나스";
		_attributeLandCount = 7;
		_attributeWaterCount = 3;
		_attributeFireCount = 0;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(6, 11);
		_petDefensePower = RND->getFromIntTo(4, 8);
		_petSpeedPower = RND->getFromIntTo(1, 5);
		_petTotalStamina = RND->getFromIntTo(60, 80);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 16;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = -10;
			_imageMoveY = -35.5f;
		}
	}

	if (_petName == MANMO)
	{
		_renderName = "manmo_stand";
		_petNameString = "만모";
		_attributeLandCount = 9;
		_attributeWaterCount = 1;
		_attributeFireCount = 0;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(7, 12);
		_petDefensePower = RND->getFromIntTo(5, 9);
		_petSpeedPower = RND->getFromIntTo(1, 5);
		_petTotalStamina = RND->getFromIntTo(60, 80);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 16;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = -10;
			_imageMoveY = -35.5f;
		}
	}

	if (_petName == MANMOR)
	{
		_renderName = "manmor_stand";
		_petNameString = "만모르";
		_attributeLandCount = 0;
		_attributeWaterCount = 2;
		_attributeFireCount = 8;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(6, 11);
		_petDefensePower = RND->getFromIntTo(4, 8);
		_petSpeedPower = RND->getFromIntTo(1, 5);
		_petTotalStamina = RND->getFromIntTo(55, 70);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 16;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = -10;
			_imageMoveY = -35.5f;
		}
	}

	if (_petName == MOGAROS)
	{
		_renderName = "mogaros_stand";
		_petNameString = "모가로스";
		_attributeLandCount = 0;
		_attributeWaterCount = 2;
		_attributeFireCount = 8;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(10, 15);
		_petDefensePower = RND->getFromIntTo(6, 10);
		_petSpeedPower = RND->getFromIntTo(5, 9);
		_petTotalStamina = RND->getFromIntTo(45, 60);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 8;
			_imageMoveY = -23.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == OGAROS)
	{
		_renderName = "ogaros_stand";
		_petNameString = "오가로스";
		_attributeLandCount = 6;
		_attributeWaterCount = 4;
		_attributeFireCount = 0;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(7, 12);
		_petDefensePower = RND->getFromIntTo(7, 12);
		_petSpeedPower = RND->getFromIntTo(4, 8);
		_petTotalStamina = RND->getFromIntTo(43, 58);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 8;
			_imageMoveY = -23.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == GORGOR)
	{
		_renderName = "gorgor_stand";
		_petNameString = "고르고르";
		_attributeLandCount = 0;
		_attributeWaterCount = 0;
		_attributeFireCount = 8;
		_attributeWindCount = 2;
		_petAttackPower = RND->getFromIntTo(5, 10);
		_petDefensePower = RND->getFromIntTo(3, 7);
		_petSpeedPower = RND->getFromIntTo(4, 8);
		_petTotalStamina = RND->getFromIntTo(30, 41);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = true;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == VERGA)
	{
		_renderName = "verga_stand";
		_petNameString = "베르가";
		_attributeLandCount = 6;
		_attributeWaterCount = 4;
		_attributeFireCount = 0;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(7, 12);
		_petDefensePower = RND->getFromIntTo(4, 8);
		_petSpeedPower = RND->getFromIntTo(5, 9);
		_petTotalStamina = RND->getFromIntTo(38, 50);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = true;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == VERURU)
	{
		_renderName = "veruru_stand";
		_petNameString = "베루루";
		_attributeLandCount = 0;
		_attributeWaterCount = 7;
		_attributeFireCount = 3;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(7, 12);
		_petDefensePower = RND->getFromIntTo(3, 7);
		_petSpeedPower = RND->getFromIntTo(5, 9);
		_petTotalStamina = RND->getFromIntTo(32, 48);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == BANBORO)
	{
		_renderName = "banboro_stand";
		_petNameString = "반보로";
		_attributeLandCount = 0;
		_attributeWaterCount = 0;
		_attributeFireCount = 5;
		_attributeWindCount = 5;
		_petAttackPower = RND->getFromIntTo(10, 14);
		_petDefensePower = RND->getFromIntTo(5, 9);
		_petSpeedPower = RND->getFromIntTo(4, 8);
		_petTotalStamina = RND->getFromIntTo(45, 60);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == BANGINO)
	{
		_renderName = "bangino_stand";
		_petNameString = "반기노";
		_attributeLandCount = 0;
		_attributeWaterCount = 0;
		_attributeFireCount = 10;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(10, 14);
		_petDefensePower = RND->getFromIntTo(5, 9);
		_petSpeedPower = RND->getFromIntTo(4, 8);
		_petTotalStamina = RND->getFromIntTo(42, 57);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == BURDON)
	{
		_renderName = "burdon_stand";
		_petNameString = "부르돈";
		_attributeLandCount = 0;
		_attributeWaterCount = 0;
		_attributeFireCount = 2;
		_attributeWindCount = 8;
		_petAttackPower = RND->getFromIntTo(9, 13);
		_petDefensePower = RND->getFromIntTo(4, 8);
		_petSpeedPower = RND->getFromIntTo(5, 9);
		_petTotalStamina = RND->getFromIntTo(41, 56);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == RIBINO)
	{
		_renderName = "ribino_stand";
		_petNameString = "리비노";
		_attributeLandCount = 10;
		_attributeWaterCount = 0;
		_attributeFireCount = 0;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(8, 12);
		_petDefensePower = RND->getFromIntTo(5, 9);
		_petSpeedPower = RND->getFromIntTo(2, 6);
		_petTotalStamina = RND->getFromIntTo(38, 50);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == YANGIRO)
	{
		_renderName = "yangiro_stand";
		_petNameString = "얀기로";
		_attributeLandCount = 0;
		_attributeWaterCount = 3;
		_attributeFireCount = 7;
		_attributeWindCount = 0;
		_petAttackPower = RND->getFromIntTo(11, 15);
		_petDefensePower = RND->getFromIntTo(6, 10);
		_petSpeedPower = RND->getFromIntTo(5, 9);
		_petTotalStamina = RND->getFromIntTo(51, 65);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == NORNOR)
	{
		_renderName = "nornor_stand";
		_petNameString = "노르노르";
		_attributeLandCount = 3;
		_attributeWaterCount = 0;
		_attributeFireCount = 0;
		_attributeWindCount = 7;
		_petAttackPower = RND->getFromIntTo(7, 11);
		_petDefensePower = RND->getFromIntTo(5, 9);
		_petSpeedPower = RND->getFromIntTo(6, 10);
		_petTotalStamina = RND->getFromIntTo(38, 50);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == GOLROS)
	{
		_renderName = "golros_stand";
		_petNameString = "골로스";
		_attributeLandCount = 0;
		_attributeWaterCount = 0;
		_attributeFireCount = 5;
		_attributeWindCount = 5;
		_petAttackPower = RND->getFromIntTo(10, 15);
		_petDefensePower = RND->getFromIntTo(8, 12);
		_petSpeedPower = RND->getFromIntTo(5, 9);
		_petTotalStamina = RND->getFromIntTo(50, 63);
		_petCurrentStamina = _petTotalStamina;
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 8;
			_imageMoveY = -23.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}
	}
}

void pet::setPlayerPetName()
{
	if (_isPlayerPet == false) return;

	int loginPlayer1 = INIDATA->loadDataInterger("캐릭터", "플레이어1", "로그인");
	int loginPlayer2 = INIDATA->loadDataInterger("캐릭터", "플레이어2", "로그인");

	if (loginPlayer1 == (int)INFO_YES)
	{
		string pet1_mode = INIDATA->loadDataString("플레이어1_펫", "펫1", "모드");
		string pet2_mode = INIDATA->loadDataString("플레이어1_펫", "펫2", "모드");
		string pet3_mode = INIDATA->loadDataString("플레이어1_펫", "펫3", "모드");
		string pet4_mode = INIDATA->loadDataString("플레이어1_펫", "펫4", "모드");
		string pet5_mode = INIDATA->loadDataString("플레이어1_펫", "펫5", "모드");

		if (pet1_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어1_펫", "펫1", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어1_펫", "펫1", "기술1");
			_petSkillNum[1] = INIDATA-> loadDataInterger("플레이어1_펫", "펫1", "기술2");
			_petSkillNum[2] = INIDATA-> loadDataInterger("플레이어1_펫", "펫1", "기술3");
			_petSkillNum[3] = INIDATA-> loadDataInterger("플레이어1_펫", "펫1", "기술4");
			_petSkillNum[4] = INIDATA-> loadDataInterger("플레이어1_펫", "펫1", "기술5");
			_petSkillNum[5] = INIDATA-> loadDataInterger("플레이어1_펫", "펫1", "기술6");
		}

		if (pet2_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어1_펫", "펫2", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어1_펫", "펫2", "기술6");
		}

		if (pet3_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어1_펫", "펫3", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어1_펫", "펫3", "기술6");
		}

		if (pet4_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어1_펫", "펫4", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어1_펫", "펫4", "기술6");
		}

		if (pet5_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어1_펫", "펫5", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어1_펫", "펫5", "기술6");
		}
	}

	if (loginPlayer2 == (int)INFO_YES)
	{
		string pet1_mode = INIDATA->loadDataString("플레이어2_펫", "펫1", "모드");
		string pet2_mode = INIDATA->loadDataString("플레이어2_펫", "펫2", "모드");
		string pet3_mode = INIDATA->loadDataString("플레이어2_펫", "펫3", "모드");
		string pet4_mode = INIDATA->loadDataString("플레이어2_펫", "펫4", "모드");
		string pet5_mode = INIDATA->loadDataString("플레이어2_펫", "펫5", "모드");


		if (pet1_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어2_펫", "펫1", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어2_펫", "펫1", "기술6");
		}

		if (pet2_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어2_펫", "펫2", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어2_펫", "펫2", "기술6");
		}

		if (pet3_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어2_펫", "펫3", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어2_펫", "펫3", "기술6");
		}

		if (pet4_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어2_펫", "펫4", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어2_이어1_펫", "펫4", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어2_펫", "펫4", "기술6");
		}

		if (pet5_mode == "배틀")
		{
			_petLevel = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "레벨");
			_petNameString = INIDATA->loadDataString("플레이어2_펫", "펫5", "이름");
			_attributeLandCount = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "지속성");
			_attributeWaterCount = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "수속성");
			_attributeFireCount = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "화속성");
			_attributeWindCount = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "풍속성");
			_petAttackPower = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "공격력");
			_petDefensePower = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "방어력");
			_petSpeedPower = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "순발력");
			_petTotalStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "전체체력");
			_petCurrentStamina = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "현재체력");
			_petSkillNum[0] = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "기술1");
			_petSkillNum[1] = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "기술2");
			_petSkillNum[2] = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "기술3");
			_petSkillNum[3] = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "기술4");
			_petSkillNum[4] = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "기술5");
			_petSkillNum[5] = INIDATA->loadDataInterger("플레이어2_펫", "펫5", "기술6");
		}
	}

	if (_petName == DURI)
	{
		_renderName = "duri_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 5;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -10.5f;
		}
	}

	if (_petName == SPOTTEDURI)
	{
		_renderName = "spottedUri_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 5;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -10.5f;
		}
	}

	if (_petName == URI)
	{
		_renderName = "uri_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 5;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -10.5f;
		}
	}

	if (_petName == MAMONAS)
	{
		_renderName = "mamonas_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 16;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = -10;
			_imageMoveY = -35.5f;
		}
	}

	if (_petName == MANMO)
	{
		_renderName = "manmo_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 16;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = -10;
			_imageMoveY = -35.5f;
		}
	}

	if (_petName == MANMOR)
	{
		_renderName = "manmor_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 16;
			_imageMoveY = -10.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = -10;
			_imageMoveY = -35.5f;
		}
	}

	if (_petName == MOGAROS)
	{
		_renderName = "mogaros_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 8;
			_imageMoveY = -23.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == OGAROS)
	{
		_renderName = "ogaros_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 8;
			_imageMoveY = -23.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == GORGOR)
	{
		_renderName = "gorgor_stand";
		_isAvailableRide = true;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == VERGA)
	{
		_renderName = "verga_stand";
		_isAvailableRide = true;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == VERURU)
	{
		_renderName = "veruru_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == BANBORO)
	{
		_renderName = "banboro_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == BANGINO)
	{
		_renderName = "bangino_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == BURDON)
	{
		_renderName = "burdon_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == RIBINO)
	{
		_renderName = "ribino_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == YANGIRO)
	{
		_renderName = "yangiro_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 16;
			_imageMoveY = -30.5f;
		}
	}

	if (_petName == NORNOR)
	{
		_renderName = "nornor_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = -8;
			_imageMoveY = -15.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 8;
			_imageMoveY = -15.5f;
		}
	}

	if (_petName == GOLROS)
	{
		_renderName = "golros_stand";
		_isAvailableRide = false;

		if (_petDirection == DIR_FIVE)
		{
			_imageMoveX = 8;
			_imageMoveY = -23.5f;
		}

		if (_petDirection == DIR_ELEVEN)
		{
			_imageMoveX = 0;
			_imageMoveY = -30.5f;
		}
	}
}
